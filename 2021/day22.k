/ ngn/k
sw:|'(((`I$".."\2_)'","\*|)'" "\'T;"n"=(T:0:"day22.txt")[;1])
i:(t@w;sw[1]@w:&(&/</')'t:(-50|50&)@'sw[0])

/ interval x - interval y
sl:{$[=/z;:();r@&~>/'r:(2':0 -1 1 0+s@<s:x,y)@1+z@&~~z]}

/ cube a - cube b (in pieces)
df:{s:{(~x=y)&(0 1+y)'x}.'+(x;y);$[|/(~&/c)<=/c:+s;:,x;()],/((!3)#\:+(|/;&/)@'++'(y;x)),/:'(,''sl@/'+(x;y;s)),\:'(1+!3)_\:x}

c:{+/*/'1+--/''r[0]@&(r:{x,'(r;(#r:{,/df[;y]'x}/[,y;*x])#z)}/[(,*)'x;1_x[0];1_x[1]])@1}
c@i
c@sw
